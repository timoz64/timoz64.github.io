(this.webpackJsonpflask_thanturi_frontend_v2=this.webpackJsonpflask_thanturi_frontend_v2||[]).push([[0],{164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),u=a.n(l),i=(a(66),a(14)),c=a(6);var o=Object(n.createContext)(),s=function(e){var t=Object(n.useState)(0),a=Object(c.a)(t,2),l=a[0],u=a[1],s=Object(n.useState)({apiPath:"https://th2e-backend.herokuapp.com/temperature/",apiEndPoint:"last_seven_days",temps:[],tempDescription:"Last seven days"}),m=Object(c.a)(s,2),d=m[0],p=m[1];function f(){fetch(d.apiPath+d.apiEndPoint).then((function(e){return e.json().then((function(e){p(Object(i.a)({},d,{temps:e}))}))}))}return function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){f(),u(l+1)}),3e5),Object(n.useEffect)((function(){f()}),[d.apiEndPoint]),r.a.createElement(o.Provider,{value:[d,p]},e.children)},m=a(56);function d(){var e=Object(n.useContext)(o),t=Object(c.a)(e,1)[0];if(!t.temps||!t.temps.length)return r.a.createElement("div",null,"No data for TemperatureCounter");var a=t.temps.length,l=t.temps.reduce((function(e,t){return e+t.temperature}),0)/a,u=t.temps.reduce((function(e,t){return e+t.humidity}),0)/a,s=t.temps.slice(-1)[0],d=Object(i.a)({},s);return r.a.createElement(m.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Number of measurements"),r.a.createElement("th",null,"Current temperature"),r.a.createElement("th",null,"Current humidity"),r.a.createElement("th",null,"Average temperature"),r.a.createElement("th",null,"Average humidity"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,d.temperature,"\xb0C"),r.a.createElement("td",null,d.humidity,"%"),r.a.createElement("td",null,Math.floor(100*l)/100,"\xb0C"),r.a.createElement("td",null,Math.floor(100*u)/100,"%"))))}var p=a(58),f=function(e){var t=Object(n.useContext)(o),a=Object(c.a)(t,1)[0],l=Object(n.useState)({labels:[]}),u=Object(c.a)(l,2),i=u[0],s=u[1];return Object(n.useEffect)((function(){var e=[];a.temps.map((function(t){return e.push(t.date_created.substring(0,19))}));var t=[];a.temps.map((function(e){return t.push(e.temperature)}));var n=[];a.temps.map((function(e){return n.push(e.humidity)})),s({labels:e,datasets:[{label:"Temperatures",yAxisID:"Temperatures",data:t,pointStyle:"line",borderColor:["rgba(232, 22, 22, 0.7  )"],borderDash:[],pointRadius:0,borderWidth:3,fill:!1},{label:"Humidity",yAxisID:"Humidity",data:n,pointStyle:"line",borderColor:["rgba(63, 191, 63, 0.7   )"],pointRadius:0,borderWidth:3,fill:!1}]})}),[a.temps]),a.temps&&a.temps.length?r.a.createElement("div",{className:"chart"},r.a.createElement("h3",null,e.headline),r.a.createElement(p.a,{data:i,options:{maintainAspectRatio:!0,legend:{display:!0,position:"top",labels:{fontColor:"#000080"}},scales:{yAxes:[{id:"Temperatures",type:"linear",position:"left",ticks:{callback:function(e,t,a){return e+" C\xb0"}}},{id:"Humidity",type:"linear",position:"right",ticks:{max:100,min:0,callback:function(e,t,a){return e+"%"}}}]}}})):r.a.createElement("div",null,"No data for Chart")};function b(){var e=Object(n.useContext)(o),t=Object(c.a)(e,1)[0];return r.a.createElement("div",null,r.a.createElement("h3",{style:{color:"rgba(232, 22, 22, 0.7  )",marginTop:"2rem"}},"Temperature and Humidity: ",t.tempDescription))}var E=a(39),h=a(26),v=function(e){var t=Object(n.useContext)(o),a=Object(c.a)(t,2),l=a[0],u=a[1];return r.a.createElement(h.a.Link,{onClick:function(){u(Object(i.a)({},l,{apiEndPoint:e.endPoint,tempDescription:e.button_title}))}},e.button_title)};function y(e){return r.a.createElement("div",null,r.a.createElement(E.a,{bg:"dark",variant:"dark"},r.a.createElement(E.a.Brand,{href:"#"},"Temperatures"),r.a.createElement(h.a,{className:"mr-auto"},r.a.createElement(v,{button_title:"Last 7 days",endPoint:"last_seven_days"}),r.a.createElement(v,{button_title:"Last 30 days",endPoint:"last_thirty_days"}),r.a.createElement(v,{button_title:"This year",endPoint:"this_year"}))))}var j=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null),r.a.createElement(b,null),r.a.createElement(d,null),r.a.createElement(f,null))},O=a(60);u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s,null,r.a.createElement(O.a,null,r.a.createElement(j,null)))),document.getElementById("root"))},61:function(e,t,a){e.exports=a(164)}},[[61,1,2]]]);
//# sourceMappingURL=main.d98aac9b.chunk.js.map