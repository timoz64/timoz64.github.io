(this.webpackJsonpflask_thanturi_frontend_v2=this.webpackJsonpflask_thanturi_frontend_v2||[]).push([[0],{164:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(25),u=n.n(l),i=(n(66),n(14)),c=n(6);var o=Object(a.createContext)(),s=function(e){var t=Object(a.useState)(0),n=Object(c.a)(t,2),l=n[0],u=n[1],s=Object(a.useState)({apiPath:"https://<YOUR IP HERE>",apiEndPoint:"last_seven_days",temps:[],tempDescription:"Last seven days"}),m=Object(c.a)(s,2),d=m[0],p=m[1];function f(){fetch(d.apiPath+d.apiEndPoint).then((function(e){return e.json().then((function(e){p(Object(i.a)({},d,{temps:e}))}))}))}return function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){f(),u(l+1)}),3e5),Object(a.useEffect)((function(){f()}),[d.apiEndPoint]),r.a.createElement(o.Provider,{value:[d,p]},e.children)},m=n(56);function d(){var e=Object(a.useContext)(o),t=Object(c.a)(e,1)[0];if(!t.temps||!t.temps.length)return r.a.createElement("div",null,"No data for TemperatureCounter");var n=t.temps.length,l=t.temps.reduce((function(e,t){return e+t.temperature}),0)/n,u=t.temps.reduce((function(e,t){return e+t.humidity}),0)/n,s=t.temps.slice(-1)[0],d=Object(i.a)({},s);return r.a.createElement(m.a,{striped:!0,bordered:!0,hover:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Number of measurements"),r.a.createElement("th",null,"Current temperature"),r.a.createElement("th",null,"Current humidity"),r.a.createElement("th",null,"Average temperature"),r.a.createElement("th",null,"Average humidity"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,n),r.a.createElement("td",null,d.temperature,"\xb0C"),r.a.createElement("td",null,d.humidity,"%"),r.a.createElement("td",null,Math.floor(100*l)/100,"\xb0C"),r.a.createElement("td",null,Math.floor(100*u)/100,"%"))))}var p=n(58),f=function(e){var t=Object(a.useContext)(o),n=Object(c.a)(t,1)[0],l=Object(a.useState)({labels:[]}),u=Object(c.a)(l,2),i=u[0],s=u[1];return Object(a.useEffect)((function(){var e=[];n.temps.map((function(t){return e.push(t.date_created.substring(0,19))}));var t=[];n.temps.map((function(e){return t.push(e.temperature)}));var a=[];n.temps.map((function(e){return a.push(e.humidity)})),s({labels:e,datasets:[{label:"Temperatures",yAxisID:"Temperatures",data:t,pointStyle:"line",borderColor:["rgba(232, 22, 22, 0.7  )"],borderDash:[],pointRadius:0,borderWidth:3,fill:!1},{label:"Humidity",yAxisID:"Humidity",data:a,pointStyle:"line",borderColor:["rgba(63, 191, 63, 0.7   )"],pointRadius:0,borderWidth:3,fill:!1}]})}),[n.temps]),n.temps&&n.temps.length?r.a.createElement("div",{className:"chart"},r.a.createElement("h3",null,e.headline),r.a.createElement(p.a,{data:i,options:{maintainAspectRatio:!0,legend:{display:!0,position:"top",labels:{fontColor:"#000080"}},scales:{yAxes:[{id:"Temperatures",type:"linear",position:"left",ticks:{callback:function(e,t,n){return e+" C\xb0"}}},{id:"Humidity",type:"linear",position:"right",ticks:{max:100,min:0,callback:function(e,t,n){return e+"%"}}}]}}})):r.a.createElement("div",null,"No data for Chart")};function E(){var e=Object(a.useContext)(o),t=Object(c.a)(e,1)[0];return r.a.createElement("div",null,r.a.createElement("h3",{style:{color:"rgba(232, 22, 22, 0.7  )",marginTop:"2rem"}},"Temperature and Humidity: ",t.tempDescription))}var b=n(39),h=n(26),v=function(e){var t=Object(a.useContext)(o),n=Object(c.a)(t,2),l=n[0],u=n[1];return r.a.createElement(h.a.Link,{onClick:function(){u(Object(i.a)({},l,{apiEndPoint:e.endPoint,tempDescription:e.button_title}))}},e.button_title)};function y(e){return r.a.createElement("div",null,r.a.createElement(b.a,{bg:"dark",variant:"dark"},r.a.createElement(b.a.Brand,{href:"#"},"Measurements"),r.a.createElement(h.a,{className:"mr-auto"},r.a.createElement(v,{button_title:"Last 7 days",endPoint:"last_seven_days"}),r.a.createElement(v,{button_title:"Last 30 days",endPoint:"last_thirty_days"}),r.a.createElement(v,{button_title:"This year",endPoint:"this_year"}))))}var j=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null),r.a.createElement(E,null),r.a.createElement(d,null),r.a.createElement(f,null))},O=n(60);u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s,null,r.a.createElement(O.a,null,r.a.createElement(j,null)))),document.getElementById("root"))},61:function(e,t,n){e.exports=n(164)}},[[61,1,2]]]);
//# sourceMappingURL=main.352018f0.chunk.js.map