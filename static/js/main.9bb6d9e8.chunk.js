(this.webpackJsonpflask_thanturi_frontend_v2=this.webpackJsonpflask_thanturi_frontend_v2||[]).push([[0],{168:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),l=a.n(i),c=(a(70),a(43)),u=a(14),m=a(6);var o=Object(n.createContext)(),s=function(e){var t=Object(n.useState)(0),a=Object(m.a)(t,2),i=a[0],l=a[1],c=Object(n.useState)({apiPath:"https://th2e-backend.herokuapp.com/temperature/",apiEndPoint:"last_seven_days",temps:[],tempDescription:"Last seven days"}),s=Object(m.a)(c,2),d=s[0],p=s[1];function f(){fetch(d.apiPath+d.apiEndPoint).then((function(e){return e.json().then((function(e){p(Object(u.a)({},d,{temps:e}))}))}))}return function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){f(),l(i+1)}),3e5),Object(n.useEffect)((function(){f()}),[d.apiEndPoint]),r.a.createElement(o.Provider,{value:[d,p]},e.children)},d=a(31),p=a(60),f=function(e){var t=Object(n.useContext)(o),a=Object(m.a)(t,1)[0],i=Object(n.useState)({labels:[]}),l=Object(m.a)(i,2),c=l[0],u=l[1];return Object(n.useEffect)((function(){var e=[];a.temps.map((function(t){return e.push(t.date_created.substring(0,16))}));var t=[];a.temps.map((function(e){return t.push(e.temperature)}));var n=[];a.temps.map((function(e){return n.push(e.humidity)})),u({labels:e,datasets:[{label:"Temperatures",yAxisID:"Temperatures",data:t,pointStyle:"line",borderColor:["rgba(232, 22, 22, 0.7  )"],borderDash:[],pointRadius:0,borderWidth:3,fill:!1},{label:"Humidity",yAxisID:"Humidity",data:n,pointStyle:"line",borderColor:["rgba(63, 191, 63, 0.7   )"],pointRadius:0,borderWidth:3,fill:!1}]})}),[a.temps]),a.temps&&a.temps.length?r.a.createElement("div",{className:"chart"},r.a.createElement("h3",null,e.headline),r.a.createElement(p.a,{data:c,options:{maintainAspectRatio:!0,legend:{display:!0,position:"top",labels:{fontColor:"#000080"}},scales:{yAxes:[{id:"Temperatures",type:"linear",position:"left",ticks:{callback:function(e,t,a){return e+" C\xb0"}}},{id:"Humidity",type:"linear",position:"right",ticks:{max:100,min:0,callback:function(e,t,a){return e+"%"}}}]}}})):r.a.createElement("div",null,"No data for Chart")};function b(){var e=Object(n.useContext)(o),t=Object(m.a)(e,1)[0];return r.a.createElement("div",null,r.a.createElement("h3",{style:{color:"red",marginTop:"2rem"}},"Temperature and Humidity: ",t.tempDescription))}var E=a(42),h=a(28),v=function(e){var t=Object(n.useContext)(o),a=Object(m.a)(t,2),i=a[0],l=a[1];return r.a.createElement(h.a.Link,{onClick:function(){l(Object(u.a)({},i,{apiEndPoint:e.endPoint,tempDescription:e.button_title}))}},e.button_title)};function y(e){return r.a.createElement("div",null,r.a.createElement(E.a,{bg:"primary",variant:"dark"},r.a.createElement(E.a.Brand,{href:"#"},"Measurements"),r.a.createElement(h.a,{className:"mr-auto"},r.a.createElement(v,{button_title:"Last 7 days",endPoint:"last_seven_days"}),r.a.createElement(v,{button_title:"Last 30 days",endPoint:"last_thirty_days"}),r.a.createElement(v,{button_title:"This year",endPoint:"this_year"}))))}var j=a(63),O=(a(168),function(e){return r.a.createElement(j.a,{sm:!0},r.a.createElement("div",{className:"box"},r.a.createElement("div",{className:"title_box"},e.name),r.a.createElement("div",{className:"data_box"},e.data)))});var _=function(e){var t=Object(n.useContext)(o),a=Object(m.a)(t,1)[0];if(!a.temps||!a.temps.length)return r.a.createElement("div",null,"No data for TemperatureCounter");var i=a.temps.length,l=a.temps.slice(-1)[0],s=Object(u.a)({},l),p=a.temps.reduce((function(e,t){return e+t.temperature}),0)/i,E=a.temps.reduce((function(e,t){return e+t.humidity}),0)/i,h=a.temps.map((function(e){return e.temperature})),v=a.temps.map((function(e){return e.humidity}));return r.a.createElement("div",{className:"App"},r.a.createElement(y,null),r.a.createElement(b,null),r.a.createElement(d.a,null,r.a.createElement(O,{name:"Number of Measurements",data:i})),r.a.createElement(d.a,null,r.a.createElement(O,{name:"Current Temperature",data:s.temperature+"\xb0C"}),r.a.createElement(O,{name:"Current Humidity",data:s.humidity+"%"}),r.a.createElement(O,{name:"Average Temperature",data:Math.floor(100*p)/100+"\xb0C"})),r.a.createElement(d.a,null,r.a.createElement(O,{name:"Average Humidity",data:Math.floor(100*E)/100+"%"}),r.a.createElement(O,{name:"Max Temperature",data:Math.max.apply(Math,Object(c.a)(h))+"\xb0C"}),r.a.createElement(O,{name:"Max Humidity",data:Math.max.apply(Math,Object(c.a)(v))+"%"})),r.a.createElement(f,null))},x=a(64);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s,null,r.a.createElement(x.a,null,r.a.createElement(_,null)))),document.getElementById("root"))},65:function(e,t,a){e.exports=a(169)}},[[65,1,2]]]);
//# sourceMappingURL=main.9bb6d9e8.chunk.js.map